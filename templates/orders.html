{% extends "base.html" %}

{% block title %}Orders - ctrl+coffee{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto;">
    <h1 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; color: var(--primary); margin-bottom: 2rem; text-align: center;">
        All Orders
    </h1>

    {% if orders %}
    <div class="orders-list">
        {% for order in orders %}
        <div class="card" style="margin-bottom: 2rem; padding: 1.5rem;">
            <!-- Order Header -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 2px solid var(--secondary);">
                <div>
                    <h3 style="font-family: 'Playfair Display', serif; color: var(--primary); margin-bottom: 0.25rem;">
                        Order #{{ order.id }}
                    </h3>
                    <p style="color: var(--text-light); margin: 0;">
                        Customer: <strong>{{ order.customer_name }}</strong>
                    </p>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 1.5rem; font-weight: 600; color: var(--primary);">
                        ${{ "%.2f"|format(order.total_amount) }}
                    </div>
                    <div style="font-size: 0.8rem; color: var(--text-light);">
                        {{ order.order_date }}
                    </div>
                </div>
            </div>

            <!-- Order Items -->
            <div style="margin-bottom: 1rem;">
                <h4 style="font-family: 'Playfair Display', serif; color: var(--primary); margin-bottom: 0.5rem;">
                    Order Items:
                </h4>
                {% if order.items_description %}
                    <p style="color: var(--text-light); margin: 0; padding: 0.5rem; background: var(--accent); border-radius: 4px;">
                        {{ order.items_description }}
                    </p>
                {% else %}
                    <p style="color: var(--text-light); font-style: italic;">No items in this order</p>
                {% endif %}
            </div>

            <!-- Order Footer -->
            <div style="display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid #e2e8f0;">
                <div style="color: var(--text-light); font-size: 0.9rem;">
                    <strong>Status:</strong> 
                    <span style="color: {% if order.status == 'completed' %}#10b981{% elif order.status == 'pending' %}#f59e0b{% else %}#6b7280{% endif %};">
                        {{ order.status|title }}
                    </span>
                </div>
                <div style="color: var(--text-light); font-size: 0.9rem;">
                    <strong>Items:</strong> {{ order.item_count }}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Orders Summary -->
    <div class="card" style="margin-top: 2rem; padding: 1.5rem;">
        <h3 style="font-family: 'Playfair Display', serif; color: var(--primary); margin-bottom: 1rem; text-align: center;">
            Orders Summary
        </h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; text-align: center;">
            <div>
                <div style="font-size: 2rem; font-weight: 600; color: var(--primary);">{{ orders|length }}</div>
                <div style="color: var(--text-light);">Total Orders</div>
            </div>
            <div>
                <div style="font-size: 2rem; font-weight: 600; color: var(--primary);">${{ "%.2f"|format(orders|sum(attribute='total_amount')) }}</div>
                <div style="color: var(--text-light);">Total Revenue</div>
            </div>
            <div>
                <div style="font-size: 2rem; font-weight: 600; color: var(--primary);">{{ orders|sum(attribute='item_count') }}</div>
                <div style="color: var(--text-light);">Total Items Sold</div>
            </div>
        </div>
    </div>

    {% else %}
    <div class="card" style="text-align: center; padding: 3rem;">
        <div style="font-size: 4rem; margin-bottom: 1rem;">üìù</div>
        <h3 style="font-family: 'Playfair Display', serif; color: var(--primary); margin-bottom: 1rem;">
            No Orders Yet
        </h3>
        <p style="color: var(--text-light); margin-bottom: 2rem;">
            When customers place orders, they will appear here.
        </p>
        <a href="{{ url_for('index') }}" class="btn">Place Your First Order</a>
    </div>
    {% endif %}

    <div style="text-align: center; margin-top: 2rem;">
        <a href="{{ url_for('index') }}" class="btn btn-outline">Back to Home</a>
        <a href="{{ url_for('menu') }}" class="btn" style="margin-left: 1rem;">View Menu</a>
    </div>
</div>
{% endblock %}